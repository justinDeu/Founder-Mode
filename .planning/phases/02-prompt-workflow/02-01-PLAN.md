---
phase: 02-prompt-workflow
plan: 01
type: execute
---

<objective>
Implement /create-prompt command that guides users through prompt creation with clarifying questions, generates well-structured XML prompts, and saves them to the prompts directory.

Purpose: Enable rapid prompt creation without manual file wrangling, following daplug's proven wizard pattern.
Output: Working create-prompt command that produces ready-to-run prompt files.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-phase.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/01-foundation/1-RESEARCH.md

**Existing code:**
@commands/run-prompt.md
@scripts/executor.py

**Reference implementation (daplug's create-prompt):**
The daplug create-prompt command at /home/thor/fun/founder-mode/daplug/commands/create-prompt.md provides the proven pattern. Key elements to adapt:
- Clarification flow for ambiguous requests
- Task complexity assessment (simple vs complex)
- XML prompt templates by type (coding, research, analysis)
- Prompt numbering and naming (001-task-name.md format)
- Decision tree after creation (run now, edit, save for later)

**Phase 2 Context (from 2-CONTEXT.md):**
- Simple case must be simple: `/run-prompt prompts/fix-bug.md` runs immediately
- Create-prompt should be like daplug's wizard: clarify intent, structure properly, save ready-to-run
- Default model is Claude, runs inline, zero questions asked
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create the create-prompt skill file</name>
  <files>commands/create-prompt.md</files>
  <action>
Create a skill file that implements the prompt creation wizard:

1. **Frontmatter:**
   - name: founder-mode:create-prompt
   - description: Create optimized prompts with clarifying questions
   - argument-hint: [task description] [--folder path]
   - allowed-tools: Read, Write, Bash, Glob, AskUserQuestion

2. **Core Flow:**
   - Parse $ARGUMENTS for task description and optional --folder
   - If description is vague/ambiguous, ask clarifying questions using AskUserQuestion
   - Assess task complexity (simple, moderate, complex)
   - Generate XML-structured prompt using appropriate template
   - Save to ./prompts/{number}-{name}.md

3. **Clarification Logic:**
   - Check if request would be clear to someone with minimal context
   - Identify ambiguous terms, missing constraints, unclear goals
   - Ask 1-3 targeted questions max, then proceed

4. **Prompt Numbering:**
   - Glob ./prompts/*.md to find highest existing number
   - Increment by 1 for new prompt (001, 002, etc.)
   - Name: lowercase, hyphen-separated, max 5 words

5. **After Save:**
   - Show prompt path
   - Offer: Run now, Edit first, Save for later
   - If "Run now", invoke /fm:run-prompt via Skill tool

Adapt the patterns from daplug's create-prompt.md but simplify:
- Remove cclimits/AI quota checking (out of scope for founder-mode)
- Remove parallel/sequential multi-prompt detection (Phase 5)
- Keep single-prompt focus for now
  </action>
  <verify>
The skill file exists at commands/create-prompt.md with:
- Valid YAML frontmatter
- Clarification logic section
- Prompt generation templates
- Numbering logic
- Post-save decision tree
  </verify>
  <done>
commands/create-prompt.md exists with complete wizard implementation including clarification flow, XML templates, numbering, and execution options.
  </done>
</task>

<task type="auto">
  <name>Task 2: Add prompt template patterns</name>
  <files>commands/create-prompt.md</files>
  <action>
Enhance create-prompt.md with structured XML templates for different task types:

1. **Coding Task Template:**
```xml
<objective>[What to build/fix/refactor]</objective>
<context>
@[relevant files]
[Tech stack, constraints]
</context>
<requirements>[Specific functional requirements]</requirements>
<implementation>[Approach, patterns, what to avoid and WHY]</implementation>
<output>
Create/modify files:
- ./path/to/file.ext - [description]
</output>
<verification>
Before declaring complete:
- [ ] [Build/test command]
- [ ] [Behavior check]
</verification>
```

2. **Research Task Template:**
```xml
<research_objective>[What to investigate]</research_objective>
<scope>[Boundaries, sources, constraints]</scope>
<deliverables>
Save findings to: ./research/[topic].md
- [Format requirements]
- [Level of detail]
</deliverables>
<evaluation_criteria>[How to assess quality]</evaluation_criteria>
```

3. **Analysis Task Template:**
```xml
<objective>[What to analyze and why]</objective>
<data_sources>
@[files to analyze]
![commands to gather data]
</data_sources>
<analysis_requirements>[Metrics, patterns, comparisons]</analysis_requirements>
<output_format>
Save analysis to: ./analyses/[name].md
</output_format>
```

4. **Template Selection Logic:**
   - Detect task type from keywords in description
   - coding: build, implement, fix, refactor, create, add
   - research: research, investigate, explore, understand
   - analysis: analyze, compare, audit, review, assess
   - Default to coding template if unclear

5. **Common Elements (all templates):**
   - Always include objective with WHY context
   - Always include verification section
   - Use @file references for context
   - Use relative paths for outputs
  </action>
  <verify>
commands/create-prompt.md contains:
- At least 3 distinct XML template patterns
- Template selection logic based on task keywords
- All templates include objective and verification sections
  </verify>
  <done>
create-prompt.md has coding, research, and analysis templates with automatic selection based on task description keywords.
  </done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] commands/create-prompt.md exists with valid frontmatter
- [ ] Skill has clarification flow for ambiguous requests
- [ ] Skill has at least 3 XML templates (coding, research, analysis)
- [ ] Skill handles prompt numbering (001, 002, etc.)
- [ ] Skill offers run/edit/save options after creation
</verification>

<success_criteria>

- create-prompt command fully implemented
- Can create numbered prompts in ./prompts/ directory
- Adapts template based on task type
- Asks clarifying questions when needed
- Offers to run prompt after creation
</success_criteria>

<output>
After completion, create `.planning/phases/02-prompt-workflow/02-01-SUMMARY.md`
</output>
